{% extends "base.html" %}

{% block title %}Haber Düzenle{% endblock %}

{% block content %}
<main class="container mt-5">
    <h2>Haber Düzenle</h2>
    <form action="{{ url_for('edit_news', news_id=news_item.id) }}" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Başlık</label>
            <input type="text" class="form-control" id="title" name="title" value="{{ news_item.title }}" required>
        </div>
        <div class="form-group">
            <label for="description">Açıklama</label>
            <div id="editor-container">{{ news_item.description | safe }}</div>
            <input type="hidden" id="description" name="description">
        </div>
        <div class="form-group">
            <label for="image">Görsel</label>
            <input type="file" class="form-control" id="image" name="image">
            {% if news_item.image_url %}
            <img src="{{ url_for('uploaded_file', filename=news_item.image_url) }}" alt="{{ news_item.title }}" style="width: 100%; height: auto; border-radius: 4px; margin-top: 10px;">
            {% endif %}
        </div>
        <button type="submit" class="btn btn-primary">Güncelle</button>
    </form>
</main>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script>
    var quill = new Quill('#editor-container', {
        theme: 'snow'
    });
    var form = document.querySelector('form');
    form.onsubmit = function() {
        var description = document.querySelector('input[name=description]');
        description.value = quill.root.innerHTML;
    };
</script>
{% endblock %}
